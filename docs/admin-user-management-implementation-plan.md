# ç®¡ç†å‘˜ç”¨æˆ·ç®¡ç†å‰ç«¯ç•Œé¢å®æ–½è®¡åˆ’

## é¡¹ç›®æ¦‚è¿°
åŸºäºæ–°çš„ç®¡ç†å‘˜ç”¨æˆ·APIæ–‡æ¡£ï¼Œå®ç°ä¸€ä¸ªå®Œæ•´çš„ç”¨æˆ·ç®¡ç†ç•Œé¢ï¼ŒåŒ…æ‹¬ç”¨æˆ·åˆ›å»ºã€åˆ—è¡¨æŸ¥çœ‹ã€æœç´¢è¿‡æ»¤å’ŒAccessTokené‡æ–°ç”Ÿæˆç­‰åŠŸèƒ½ã€‚å‚è€ƒç°æœ‰çš„LLM APIç®¡ç†åŠŸèƒ½çš„è®¾è®¡é£æ ¼ï¼Œç¡®ä¿ç•Œé¢ä¸€è‡´æ€§å’Œç”¨æˆ·ä½“éªŒã€‚

## å®æ–½è®¡åˆ’è¯¦æƒ…

### ğŸ” **é˜¶æ®µ1: åˆ†æä¸è®¾è®¡** (1-2å¤©)

#### 1.1 åˆ†æç°æœ‰ç”¨æˆ·ç®¡ç†ç›¸å…³ç»„ä»¶å’ŒAPI
- æ£€æŸ¥ç°æœ‰çš„ç”¨æˆ·ç›¸å…³ç»„ä»¶å’ŒAPIç»“æ„
- åˆ†ææƒé™æ§åˆ¶æœºåˆ¶
- ç¡®å®šéœ€è¦å¤ç”¨çš„ç»„ä»¶

#### 1.2 è®¾è®¡ç”¨æˆ·ç®¡ç†ç•Œé¢çš„è·¯ç”±å’Œé¡µé¢ç»“æ„
- å‚è€ƒAIç®¡ç†çš„è·¯ç”±ç»“æ„ï¼š`/dashboard/user-admin/`
- è®¾è®¡é¡µé¢å¸ƒå±€ï¼šç”¨æˆ·åˆ—è¡¨ + æ“ä½œæŒ‰é’® + è¡¨å•æ¨¡æ€æ¡†

### ğŸ› ï¸ **é˜¶æ®µ2: åŸºç¡€æ¶æ„** (2-3å¤©)

#### 2.1 åˆ›å»ºç”¨æˆ·ç®¡ç†çš„APIæ¥å£å°è£…
- åˆ›å»º `src/apis/user-admin.ts`
- å°è£…ä¸‰ä¸ªæ ¸å¿ƒAPIï¼šåˆ›å»ºç”¨æˆ·ã€è·å–ç”¨æˆ·åˆ—è¡¨ã€é‡æ–°ç”ŸæˆToken
- éµå¾ªé¡¹ç›®APIå“åº”æ ¼å¼ï¼š`{ code, message, data }`

#### 2.2 åˆ›å»ºç”¨æˆ·ç®¡ç†çš„TypeScriptç±»å‹å®šä¹‰
- åˆ›å»º `src/types/user-admin.ts`
- å®šä¹‰ç”¨æˆ·å¯¹è±¡ã€APIè¯·æ±‚/å“åº”ç±»å‹
- åŒ…å«æ¥æºç±»å‹æšä¸¾ï¼ˆadmin_created, register, oauth_*ï¼‰

### ğŸ¨ **é˜¶æ®µ3: ç•Œé¢å®ç°** (3-5å¤©)

#### 3.1 å®ç°ç”¨æˆ·åˆ—è¡¨é¡µé¢
**æ–‡ä»¶ç»“æ„**ï¼š
```
src/pages/dashboard/user-admin/
â”œâ”€â”€ user-admin.tsx          # ä¸»é¡µé¢å®¹å™¨
â”œâ”€â”€ users/
â”‚   â”œâ”€â”€ users.tsx          # ç”¨æˆ·åˆ—è¡¨é¡µé¢
â”‚   â””â”€â”€ components/
â”‚       â”œâ”€â”€ user-card.tsx  # ç”¨æˆ·ä¿¡æ¯å¡ç‰‡
â”‚       â”œâ”€â”€ user-form.tsx  # åˆ›å»º/ç¼–è¾‘ç”¨æˆ·è¡¨å•
â”‚       â””â”€â”€ user-actions.tsx # ç”¨æˆ·æ“ä½œç»„ä»¶
```

**æ ¸å¿ƒåŠŸèƒ½**ï¼š
- å“åº”å¼ç”¨æˆ·åˆ—è¡¨ï¼ˆå¡ç‰‡å¸ƒå±€ï¼‰
- æœç´¢åŠŸèƒ½ï¼ˆç”¨æˆ·åã€é‚®ç®±ï¼‰
- æ¥æºè¿‡æ»¤ï¼ˆadmin_created, register, oauthç­‰ï¼‰
- åˆ†é¡µæ”¯æŒ
- æ’åºåŠŸèƒ½ï¼ˆåˆ›å»ºæ—¶é—´ã€æ›´æ–°æ—¶é—´ï¼‰

#### 3.2 å®ç°åˆ›å»ºç”¨æˆ·è¡¨å•ç»„ä»¶
**ç‰¹æ€§**ï¼š
- æ¨¡æ€æ¡†å½¢å¼çš„è¡¨å•
- å®æ—¶éªŒè¯ï¼ˆé‚®ç®±æ ¼å¼ã€å¿…å¡«å­—æ®µï¼‰
- åŠ è½½çŠ¶æ€å’Œé”™è¯¯å¤„ç†
- æˆåŠŸåæ˜¾ç¤ºç”Ÿæˆçš„AccessTokenå¹¶æ”¯æŒå¤åˆ¶

#### 3.3 å®ç°ç”¨æˆ·æ“ä½œç»„ä»¶
**åŠŸèƒ½åŒ…æ‹¬**ï¼š
- é‡æ–°ç”ŸæˆAccessTokenï¼ˆå¸¦ç¡®è®¤å¯¹è¯æ¡†ï¼‰
- æ˜¾ç¤ºç”¨æˆ·è¯¦ç»†ä¿¡æ¯
- AccessTokenå¤åˆ¶åŠŸèƒ½

### ğŸŒ **é˜¶æ®µ4: å›½é™…åŒ–ä¸é›†æˆ** (1-2å¤©)

#### 4.1 åˆ›å»ºå›½é™…åŒ–ç¿»è¯‘æ–‡ä»¶
- åˆ›å»º `src/lib/i18n/en/user-admin.json`
- åˆ›å»º `src/lib/i18n/zh/user-admin.json`
- åˆ›å»º `src/lib/i18n/ja/user-admin.json`
- æ›´æ–° `src/lib/i18n.ts` é…ç½®

#### 4.2 é›†æˆåˆ°ç°æœ‰ç®¡ç†å‘˜èœå•ä¸­
- æ›´æ–°ç®¡ç†å‘˜å¯¼èˆªèœå•
- æ·»åŠ æƒé™æ£€æŸ¥
- ç¡®ä¿è·¯ç”±æ­£ç¡®é…ç½®

### ğŸ§ª **é˜¶æ®µ5: æµ‹è¯•ä¸ä¼˜åŒ–** (1-2å¤©)

#### 5.1 åŠŸèƒ½æµ‹è¯•
- ç”¨æˆ·åˆ›å»ºæµç¨‹æµ‹è¯•
- åˆ—è¡¨æœç´¢å’Œè¿‡æ»¤æµ‹è¯•
- Tokené‡æ–°ç”Ÿæˆæµ‹è¯•
- å“åº”å¼è®¾è®¡æµ‹è¯•

#### 5.2 ç”¨æˆ·ä½“éªŒä¼˜åŒ–
- åŠ è½½çŠ¶æ€ä¼˜åŒ–
- é”™è¯¯æç¤ºä¼˜åŒ–
- äº¤äº’åé¦ˆä¼˜åŒ–

## æŠ€æœ¯å®ç°ç»†èŠ‚

### ğŸ¨ **è®¾è®¡é£æ ¼å‚è€ƒLLM APIç®¡ç†**
- **å¸ƒå±€**ï¼šå¡ç‰‡å¼è®¾è®¡ï¼Œå“åº”å¼å¸ƒå±€
- **ç»„ä»¶åº“**ï¼šHeroUI + Tailwind CSS
- **çŠ¶æ€ç®¡ç†**ï¼šæœ¬åœ°çŠ¶æ€ + Valtioï¼ˆå¦‚éœ€è¦ï¼‰
- **å›¾æ ‡**ï¼šLucide React
- **åŠ¨ç”»**ï¼šFramer Motion

### ğŸ”§ **å…³é”®æŠ€æœ¯æ¨¡å¼**
```typescript
// åŠ è½½çŠ¶æ€ç­–ç•¥
const [isInitialLoad, setIsInitialLoad] = useState(true);
const [showSkeleton, setShowSkeleton] = useState(false);
const [operationLoadingIds, setOperationLoadingIds] = useState<Set<string>>(new Set());

// æœç´¢é˜²æŠ–
const [searchTerm, setSearchTerm] = useState('');
const [debouncedSearchTerm, setDebouncedSearchTerm] = useState('');

// åˆ†é¡µå’Œè¿‡æ»¤
const [currentPage, setCurrentPage] = useState(1);
const [filters, setFilters] = useState({
  source: '',
  name: '',
  email: ''
});
```

### ğŸ“± **å“åº”å¼è®¾è®¡**
- **æ¡Œé¢**ï¼šåŒåˆ—å¡ç‰‡å¸ƒå±€ + ä¾§è¾¹æ“ä½œé¢æ¿
- **å¹³æ¿**ï¼šå•åˆ—å¡ç‰‡å¸ƒå±€ + åº•éƒ¨æ“ä½œæ 
- **æ‰‹æœº**ï¼šå †å å¼å¸ƒå±€ + å…¨å±æ¨¡æ€æ¡†

### ğŸ”’ **å®‰å…¨è€ƒè™‘**
- AccessTokenæ˜¾ç¤ºï¼šé»˜è®¤éšè—ï¼Œç‚¹å‡»æ˜¾ç¤º
- æ•æ„Ÿæ“ä½œç¡®è®¤ï¼šé‡æ–°ç”ŸæˆTokenéœ€è¦äºŒæ¬¡ç¡®è®¤
- æƒé™éªŒè¯ï¼šç®¡ç†å‘˜æƒé™æ£€æŸ¥

### ğŸš€ **æ€§èƒ½ä¼˜åŒ–**
- æœç´¢é˜²æŠ–ï¼ˆ500msï¼‰
- è™šæ‹Ÿæ»šåŠ¨ï¼ˆç”¨æˆ·é‡å¤§æ—¶ï¼‰
- å›¾ç‰‡æ‡’åŠ è½½
- åˆ†é¡µåŠ è½½

## APIé›†æˆè§„èŒƒ

### **è¯·æ±‚æ ¼å¼**
```typescript
// åˆ›å»ºç”¨æˆ·
POST /api/v1/admin/users
{
  "name": "ç”¨æˆ·å",
  "email": "ç”¨æˆ·é‚®ç®±"
}

// è·å–ç”¨æˆ·åˆ—è¡¨
GET /api/v1/admin/users?page=1&pagesize=20&name=æœç´¢è¯&email=é‚®ç®±æœç´¢&source=æ¥æºç±»å‹

// é‡æ–°ç”ŸæˆToken
POST /api/v1/admin/users/token
{
  "user_id": "ç”¨æˆ·ID"
}
```

### **å“åº”æ ¼å¼**
```typescript
// ç»Ÿä¸€å“åº”æ ¼å¼
interface ApiResponse<T> {
  meta: {
    code: number;
    message: string;
    request_id: string;
  };
  data: T;
}
```

### **é”™è¯¯å¤„ç†**
- 400: è¯·æ±‚å‚æ•°é”™è¯¯
- 403: æ— æƒé™è®¿é—®
- 409: é‚®ç®±å·²å­˜åœ¨
- 500: æœåŠ¡å™¨å†…éƒ¨é”™è¯¯

## æ•°æ®æ¨¡å‹

### **ç”¨æˆ·å¯¹è±¡ç±»å‹**
```typescript
interface User {
  id: string;
  appid: string;
  name: string;
  email: string;
  source: 'admin_created' | 'register' | 'oauth_google' | 'oauth_github';
  created_at: number;
  updated_at: number;
}

interface CreateUserResponse {
  user_id: string;
  name: string;
  email: string;
  access_token: string;
  created_at: number;
}

interface UserListResponse {
  list: User[];
  total: number;
}
```

## ç•Œé¢è®¾è®¡è§„èŒƒ

### **å¸ƒå±€è§„èŒƒ**
```typescript
// é¡µé¢ç»“æ„
<Container>
  <Header>
    <Title />
    <CreateButton />
    <SearchAndFilters />
  </Header>
  <Content>
    <UserCards />
    <Pagination />
  </Content>
</Container>

// ç”¨æˆ·å¡ç‰‡ç»“æ„
<UserCard>
  <UserInfo />
  <UserStats />
  <ActionButtons />
</UserCard>
```

### **é¢œè‰²ä¸»é¢˜**
- ä¸»è‰²è°ƒï¼šè·Ÿéšé¡¹ç›®ä¸»é¢˜è‰²
- çŠ¶æ€é¢œè‰²ï¼š
  - æ¿€æ´»ç”¨æˆ·ï¼šç»¿è‰² (success)
  - ç®¡ç†å‘˜åˆ›å»ºï¼šè“è‰² (primary)
  - æ³¨å†Œç”¨æˆ·ï¼šç°è‰² (default)
  - OAuthç”¨æˆ·ï¼šç´«è‰² (secondary)

### **å›¾æ ‡è§„èŒƒ**
- åˆ›å»ºç”¨æˆ·ï¼šUserPlus
- æœç´¢ï¼šSearch
- è¿‡æ»¤ï¼šFilter
- é‡æ–°ç”Ÿæˆï¼šRefreshCw
- å¤åˆ¶ï¼šCopy
- ç”¨æˆ·ï¼šUser

## æ€§èƒ½è¦æ±‚

### **å“åº”æ—¶é—´**
- é¡µé¢åˆå§‹åŠ è½½ï¼š< 2ç§’
- æœç´¢å“åº”ï¼š< 500æ¯«ç§’
- æ“ä½œåé¦ˆï¼š< 100æ¯«ç§’

### **æ•°æ®å¤„ç†**
- åˆ†é¡µå¤§å°ï¼šé»˜è®¤20ï¼Œæœ€å¤§50
- æœç´¢é˜²æŠ–ï¼š500ms
- ç¼“å­˜ç­–ç•¥ï¼šæœ¬åœ°çŠ¶æ€ç¼“å­˜æœç´¢ç»“æœ

## å®‰å…¨è¦æ±‚

### **æƒé™æ§åˆ¶**
- é¡µé¢è®¿é—®ï¼šç®¡ç†å‘˜æƒé™æ£€æŸ¥
- APIè°ƒç”¨ï¼šJWT TokenéªŒè¯
- æ“ä½œç¡®è®¤ï¼šæ•æ„Ÿæ“ä½œäºŒæ¬¡ç¡®è®¤

### **æ•°æ®å®‰å…¨**
- AccessTokenï¼šé»˜è®¤éšè—æ˜¾ç¤º
- æ•æ„Ÿä¿¡æ¯ï¼šä¸åœ¨URLå‚æ•°ä¸­ä¼ é€’
- é”™è¯¯ä¿¡æ¯ï¼šä¸æš´éœ²ç³»ç»Ÿå†…éƒ¨ä¿¡æ¯

## æµ‹è¯•è®¡åˆ’

### **å•å…ƒæµ‹è¯•**
- APIæ¥å£å‡½æ•°æµ‹è¯•
- è¡¨å•éªŒè¯é€»è¾‘æµ‹è¯•
- å·¥å…·å‡½æ•°æµ‹è¯•

### **é›†æˆæµ‹è¯•**
- å®Œæ•´çš„ç”¨æˆ·åˆ›å»ºæµç¨‹æµ‹è¯•
- æœç´¢å’Œè¿‡æ»¤åŠŸèƒ½æµ‹è¯•
- Tokené‡æ–°ç”Ÿæˆæµç¨‹æµ‹è¯•

### **ç«¯åˆ°ç«¯æµ‹è¯•**
- ç”¨æˆ·ç®¡ç†å®Œæ•´å·¥ä½œæµç¨‹
- å“åº”å¼è®¾è®¡æµ‹è¯•
- é”™è¯¯å¤„ç†æµ‹è¯•

## é¢„æœŸäº¤ä»˜æˆæœ

### ğŸ“‹ **åŠŸèƒ½æ¸…å•**
- âœ… å®Œæ•´çš„ç”¨æˆ·ç®¡ç†ç•Œé¢
- âœ… ç”¨æˆ·åˆ›å»ºåŠŸèƒ½ï¼ˆå«è¡¨å•éªŒè¯ï¼‰
- âœ… ç”¨æˆ·åˆ—è¡¨å±•ç¤ºï¼ˆæ”¯æŒæœç´¢ã€è¿‡æ»¤ã€åˆ†é¡µï¼‰
- âœ… AccessTokené‡æ–°ç”ŸæˆåŠŸèƒ½
- âœ… å¤šè¯­è¨€æ”¯æŒï¼ˆä¸­è‹±æ—¥ï¼‰
- âœ… å“åº”å¼è®¾è®¡
- âœ… æƒé™æ§åˆ¶

### ğŸ“ **æ–‡ä»¶ç»“æ„**
```
src/
â”œâ”€â”€ pages/dashboard/user-admin/           # ç”¨æˆ·ç®¡ç†é¡µé¢
â”‚   â”œâ”€â”€ user-admin.tsx                   # ä¸»é¡µé¢å®¹å™¨
â”‚   â””â”€â”€ users/                           # ç”¨æˆ·ç®¡ç†å­é¡µé¢
â”‚       â”œâ”€â”€ users.tsx                    # ç”¨æˆ·åˆ—è¡¨é¡µé¢
â”‚       â””â”€â”€ components/                  # ç»„ä»¶ç›®å½•
â”‚           â”œâ”€â”€ user-card.tsx           # ç”¨æˆ·ä¿¡æ¯å¡ç‰‡
â”‚           â”œâ”€â”€ user-form.tsx           # åˆ›å»º/ç¼–è¾‘è¡¨å•
â”‚           â””â”€â”€ user-actions.tsx        # ç”¨æˆ·æ“ä½œç»„ä»¶
â”œâ”€â”€ apis/user-admin.ts                   # APIæ¥å£å°è£…
â”œâ”€â”€ types/user-admin.ts                  # ç±»å‹å®šä¹‰
â””â”€â”€ lib/i18n/*/user-admin.json          # å›½é™…åŒ–æ–‡ä»¶
```

### ğŸ¯ **è´¨é‡æ ‡å‡†**
- TypeScriptä¸¥æ ¼æ¨¡å¼é€šè¿‡
- ESLintæ£€æŸ¥é€šè¿‡
- å“åº”å¼è®¾è®¡å®Œå¤‡
- æ— éšœç¢æ€§æ ‡å‡†ç¬¦åˆ
- é”™è¯¯å¤„ç†å®Œå–„
- åŠ è½½çŠ¶æ€ä¼˜ç§€

## æ—¶é—´ä¼°ç®—
**æ€»è®¡ï¼š7-12ä¸ªå·¥ä½œæ—¥**
- åˆ†æè®¾è®¡ï¼š1-2å¤©
- åŸºç¡€æ¶æ„ï¼š2-3å¤©
- ç•Œé¢å®ç°ï¼š3-5å¤©
- å›½é™…åŒ–é›†æˆï¼š1-2å¤©
- æµ‹è¯•ä¼˜åŒ–ï¼š1-2å¤©

## é£é™©è¯„ä¼°

### **æŠ€æœ¯é£é™©**
- APIæ¥å£å˜æ›´ï¼šä¸­ç­‰é£é™©ï¼Œéœ€è¦ä¸åç«¯ä¿æŒæ²Ÿé€š
- æƒé™ç³»ç»Ÿé›†æˆï¼šä½é£é™©ï¼Œå·²æœ‰æˆç†Ÿæ–¹æ¡ˆ
- å“åº”å¼è®¾è®¡å¤æ‚æ€§ï¼šä½é£é™©ï¼Œæœ‰å‚è€ƒå®ç°

### **ä¸šåŠ¡é£é™©**
- ç”¨æˆ·ä½“éªŒä¸ä¸€è‡´ï¼šä½é£é™©ï¼Œæœ‰LLMç®¡ç†å‚è€ƒ
- å®‰å…¨æ€§é—®é¢˜ï¼šä¸­ç­‰é£é™©ï¼Œéœ€è¦ä»”ç»†å¤„ç†æ•æ„Ÿä¿¡æ¯
- å›½é™…åŒ–é—æ¼ï¼šä½é£é™©ï¼Œæœ‰å®Œå–„çš„i18nä½“ç³»

### **æ—¶é—´é£é™©**
- éœ€æ±‚å˜æ›´ï¼šä¸­ç­‰é£é™©ï¼Œå¯èƒ½å½±å“å¼€å‘è¿›åº¦
- æµ‹è¯•æ—¶é—´ä¸è¶³ï¼šä½é£é™©ï¼ŒåŠŸèƒ½ç›¸å¯¹ç®€å•
- é›†æˆé—®é¢˜ï¼šä½é£é™©ï¼Œæ¶æ„æ¸…æ™°

## åç»­ç»´æŠ¤

### **ä»£ç ç»´æŠ¤**
- å®šæœŸæ›´æ–°ä¾èµ–ç‰ˆæœ¬
- ä»£ç è´¨é‡æ£€æŸ¥
- æ€§èƒ½ç›‘æ§å’Œä¼˜åŒ–

### **åŠŸèƒ½æ‰©å±•**
- æ‰¹é‡ç”¨æˆ·æ“ä½œ
- ç”¨æˆ·å¯¼å…¥å¯¼å‡º
- æ›´å¤šç”¨æˆ·æ¥æºæ”¯æŒ
- ç”¨æˆ·æ´»åŠ¨æ—¥å¿—

### **æ–‡æ¡£æ›´æ–°**
- APIæ–‡æ¡£åŒæ­¥æ›´æ–°
- ç”¨æˆ·ä½¿ç”¨æ‰‹å†Œ
- å¼€å‘è€…æ–‡æ¡£ç»´æŠ¤

---

*æœ¬å®æ–½è®¡åˆ’åŸºäºå½“å‰çš„APIæ–‡æ¡£å’Œç°æœ‰ç³»ç»Ÿæ¶æ„åˆ¶å®šï¼Œå¦‚æœ‰å˜æ›´éœ€è¦åŠæ—¶æ›´æ–°è®¡åˆ’å†…å®¹ã€‚*